<!DOCTYPE html>
<html>
	<style type='text/css'>
	.embeddedServiceHelpButton .helpButton .uiButton {
		background-color: #005290;
		font-family: "Arial", sans-serif;
	}
	.embeddedServiceHelpButton .helpButton .uiButton:focus {
		outline: 1px solid #005290;
	}
	.queuePositionCounter {
                display:none !important; 
        }
</style>
    
<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
	var initESW = function(gslbBaseURL) {
	    let newMsg = "A HUMIRA Complete Specialist will be with you shortly. Thank you for your patience. If preferred, please call HUMIRA Complete at <b>1.800.4HUMIRA</b> (1.800.448.6472), Monday to Friday, from 8 AM to 8 PM EST."; //Message to be show when >3.
	    let defMsg = "Test A HUMIRA Complete Specialist will be with you shortly. Thank you for your patience."; //Default Message
        
			embedded_svc.addEventHandler("onChatRequestSuccess",async function(data) {   
			await new Promise(resolve => setTimeout(resolve, 1000)); // Wait for the elements to get rendered first
				try { 
						let queueValue = $('.queuePositionCounter:first').text();
						let queueMsg = $('.queuePositionMessage p:first-child');
					if(parseInt(queueValue) > 1 ){ 
						queueMsg.html(newMsg);
						}else{
						queueMsg.html(newMsg); //Default label
						} 
						}
				catch(err) { 
						}
					});
			embedded_svc.addEventHandler("onQueueUpdate", function(data) {
			try {
				let queueMsg = $('.queuePositionMessage p:first-child');
			if(parseInt(data.queuePosition) > 1 ){ 
				queueMsg.html(newMsg);
					}else{
				queueMsg.html(newMsg); //Default label
				} 
			}
			catch(err) {
		}
		});
			embedded_svc.addEventHandler("onAvailability", function(data) {
			try {
				let queueValue = $('.queuePositionCounter:first').text();
				let queueMsg = $('.queuePositionMessage p:first-child');
			if(parseInt(queueValue) > 1 ){ 
				queueMsg.html(newMsg);
			}else{
				queueMsg.html(newMsg); //Default label
			} 
		}
			catch(err) {
		}   
		});
		embedded_svc.settings.displayHelpButton = true; //Or false
		embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'

		embedded_svc.settings.defaultMinimizedText = 'Chat 24/7'; //(Defaults to Chat with an Expert)
		//embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)

		//embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
		//embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)

	// Settings for Chat
 	//embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
	// Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
	// Returns a valid button ID.
	//};
        
        
	 
                      

                    embedded_svc.settings.prepopulatedPrechatFields = {
                            
                             PS_ProductName__c:'HUMIRA'
                      }; //Sets the auto-population of pre-chat form fields

		embedded_svc.settings.enabledFeatures = ['LiveAgent'];
		embedded_svc.settings.entryFeature = 'LiveAgent';

		embedded_svc.init(
			'https://pap--pobc3bwave.sandbox.my.salesforce.com',
			'https://pap--pobc3bwave.sandbox.my.site.com/HUMIRAwebchat',
			gslbBaseURL,
			'00D8A000000MhKe',
			'PS_LiveWebChatHumira',
			{
				baseLiveAgentContentURL: 'https://c.la2-c1cs-ia2.salesforceliveagent.com/content',
				deploymentId: '5728A00000009TM',
				buttonId: '5738A0000000Fy8',
				baseLiveAgentURL: 'https://d.la2-c1cs-ia2.salesforceliveagent.com/chat',
				eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I8A0000008PdfUAE_183d66c08e8',
				isOfflineSupportEnabled: false
			}
		);
	};

	if (!window.embedded_svc) {
		var s = document.createElement('script');
		s.setAttribute('src', 'https://pap--pobc3bwave.sandbox.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
			initESW(null);
		};
		document.body.appendChild(s);
	} else {
		initESW('https://service.force.com');
	}
</script>
    </html>
